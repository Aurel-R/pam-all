
I'll use autoconf and automake later... 

#########################################################
#						       	#
#		   Pre-installation		       	#
#							#
#########################################################

--- dependencies ---
	1. install:
		- libpam0g and libpam0g-dev
		- libssl and libssl-dev

--- secure your session ---
	1. open an independent terminal
	2. sudo bash
	3. do not close it, it can save you ;-)


(on other terminal) 

#########################################################

Info: add an user in sudo grp ->  usermod -a -G sudo UserName

--- make directory ---
	1. mkdir /etc/shared		(contains groups file)
	2. mkdir /etc/shared/users	(contains users files)
	3. mkdir /var/lib/shared	(contains temporary command files)


--- install pam module --- 
	1. make
	2. copy pam_shamir.so in /lib/security/ (depend of your system (lib32, lib64, x86_64-linux-gnu...)
	3. chown root:root pam_shamir.so
	4. chmod 644 pam_shamir.so
	5. ln -s /lib/security/pam_shamir.so /usr/lib/sudo/shared.so


--- configure sudoers --- 
	1. edit /etc/sudoers (sudo EDITOR=/usr/bin/vim visudo) :
	
	> - 	Defaults	env_reset
	> + 	Defaults	env_reset,timestamp_timeout=0


--- configure sudo ---
	1. edit (or create) /etc/sudo.conf :

	>	Plugin	sudoers_policy	sudoers.so
	>	Plugin	sudoers_io	sudoers.so
	> +	Plugin  shared_io	shared.so


	
--- configure pam ---
	1 create /etc/pam.d/validate (adapt the module path):

	> +	auth    required        pam_unix.so
	> +	auth    required        /lib/x86_64-linux-gnu/security/pam_shamir.so debug
	> +	session required        /lib/x86_64-linux-gnu/security/pam_shamir.so debug



	2. edit /etc/pam.d/sudo :
  
	>	auth       required   pam_env.so readenv=1 user_readenv=0
	>	auth       required   pam_env.so readenv=1 envfile=/etc/default/locale user_readenv=0
	>	@include common-auth
	> + 	auth       required     /lib/x86_64-linux-gnu/security/pam_shamir.so debug 
	>	@include common-account
	> +	session required        /lib/x86_64-linux-gnu/security/pam_shamir.so
	>	@include common-session-noninteractive 
	

	3. edit /etc/pam.d/common-password :

	>	password        [success=1 default=ignore]      pam_unix.so obscure sha512
	>	password        requisite                       pam_deny.so
	>	password        required                        pam_permit.so
	>	password        optional        		pam_gnome_keyring.so
	> +	password        required        		/lib/x86_64-linux-gnu/security/pam_shamir.so



